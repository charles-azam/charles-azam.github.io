---
import BaseLayout from '../../layouts/BaseLayout.astro'
import { FemHeroSection } from '../../components/FemHeroSection'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog'))
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 3)
---

<BaseLayout lang="fr">
  <div class="animate-page-in">
    <!-- Hero section -->
    <section class="mx-auto max-w-5xl px-6 pt-10 pb-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
        <!-- Intro text -->
        <div class="lg:order-2 lg:pl-2">
          <p class="text-xs font-mono text-[var(--color-accent)] uppercase tracking-widest mb-3">
            Ingénieur Scientifique & Développeur IA
          </p>
          <h1 class="font-[var(--font-display)] text-5xl lg:text-[3.5rem] leading-[1.1] text-[var(--color-text)] mb-5">
            Charles Azam
          </h1>
          <p class="text-[15px] leading-relaxed mb-4 text-[var(--color-text)]">
            Le cadre à gauche est un véritable solveur d’éléments finis fonctionnant dans votre navigateur — 
            assemblant des matrices de rigidité, résolvant des problèmes de valeurs propres, rendant des déformées modales. 
            J’apporte la même rigueur d’ingénierie aux systèmes d’IA.
          </p>
          <p class="text-sm text-[var(--color-text-muted)] mb-6 leading-relaxed">
            Je construis actuellement une entreprise, tout en proposant du conseil
            et des formations aux équipes d'ingénierie. Précédemment directeur technique chez Jimmy Energy, où j'ai transformé
            des flux de travail traditionnels en systèmes pilotés par le code.
          </p>
          <div class="flex gap-4">
            <a href="https://www.linkedin.com/in/charles-azam-a4223b135/" target="_blank" rel="noopener noreferrer" class="text-sm font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors">LinkedIn</a>
            <a href="https://github.com/charles-azam" target="_blank" rel="noopener noreferrer" class="text-sm font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors">GitHub</a>
            <a href="https://huggingface.co/charles-azam" target="_blank" rel="noopener noreferrer" class="text-sm font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors">HuggingFace</a>
          </div>
        </div>

        <!-- FEM Canvas (React island) -->
        <div class="lg:order-1" id="fem-container">
          <div id="fem-skeleton">
            <div class="border border-[var(--color-border)] rounded-t-lg bg-[var(--color-bg-secondary)] h-[380px] shadow-sm flex items-center justify-center">
              <p class="text-xs font-mono text-[var(--color-text-muted)] animate-pulse">Chargement du solveur FEM...</p>
            </div>
            <div class="border border-t-0 border-[var(--color-border)] rounded-b-lg bg-[var(--color-bg-secondary)] h-[88px] shadow-sm"></div>
          </div>
          <FemHeroSection client:only="react" lang="fr" />
        </div>
      </div>
    </section>

    <!-- About -->
    <section class="mx-auto max-w-5xl px-6 py-10">
      <div class="flex items-start gap-5 p-6 rounded-lg border border-[var(--color-border)] bg-[var(--color-bg-secondary)]">
        <img
          src="/headshot.jpg"
          alt="Charles Azam"
          class="w-20 h-20 rounded-full object-cover shrink-0 border-2 border-[var(--color-border)]"
        />
        <div>
          <p class="text-sm leading-relaxed text-[var(--color-text)]">
            Ingénieur en calcul scientifique devenu directeur technique, je construis actuellement ma propre entreprise. Après des années à concevoir des systèmes nucléaires et à diriger des équipes d'ingénierie, je propose des formations et du conseil pour financer l'aventure entrepreneuriale. Je suis convaincu que la meilleure ingénierie est pilotée par le code, versionnée et construite pour durer.
          </p>
          <a
            href="/fr/consulting"
            class="inline-flex items-center gap-1.5 mt-3 text-sm font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors"
          >
            Comment je peux vous aider &rarr;
          </a>
        </div>
      </div>
    </section>

    <!-- Étude de cas -->
    <section class="mx-auto max-w-5xl px-6 pb-10">
      <div class="p-6 rounded-lg border border-[var(--color-accent)]/30 bg-[var(--color-accent-light)]">
        <p class="text-xs font-mono text-[var(--color-accent)] uppercase tracking-widest mb-2">Étude de cas</p>
        <h2 class="font-[var(--font-display)] text-xl text-[var(--color-text)] mb-1">Jimmy Energy</h2>
        <p class="text-xs font-mono text-[var(--color-text-muted)] mb-4">Directeur (CIO) & membre du Comex — 2022–2025</p>

        <p class="text-sm leading-relaxed mb-4">
          Jimmy Energy construit des micro-réacteurs nucléaires pour décarboner la chaleur industrielle. À mon arrivée, l'équipe d'ingénierie s'appuyait sur un PLM hérité et des workflows basés sur des fichiers — une mise à jour majeure du design prenait des mois.
        </p>

        <p class="text-sm font-semibold text-[var(--color-text)] mb-2">Ce que nous avons construit</p>
        <ul class="space-y-2 mb-4">
          {[
            'Remplacement du PLM hérité par un système Python (PyJimmy) où tous les systèmes sont décrits en code',
            'Synchronisation de toutes les équipes via GitHub, avec contrôle qualité par pull requests',
            'Automatisation de la vérification des exigences réglementaires avec GitHub Actions',
            "Construction d'un système RAG sur 1 million de PDFs techniques pour la recherche de connaissances",
          ].map((item) => (
            <li class="flex gap-3 text-sm">
              <span class="w-1 h-1 mt-2.5 rounded-full bg-[var(--color-accent)] shrink-0" />
              <span>{item}</span>
            </li>
          ))}
        </ul>

        <p class="text-sm font-semibold text-[var(--color-text)] mb-2">Résultats</p>
        <ul class="space-y-2 mb-5">
          {[
            "Une mise à jour majeure du design prend désormais des jours au lieu des mois attendus dans l'industrie",
            'Des résultats plus sûrs — les vérifications automatisées et les relations codées en Python éliminent les erreurs de copier-coller',
            "Les ingénieurs consacrent leur temps à l'ingénierie plutôt qu'à la gestion de fichiers",
            "Des données propres et versionnées permettent des workflows IA dans toute l'organisation",
          ].map((item) => (
            <li class="flex gap-3 text-sm">
              <span class="w-1 h-1 mt-2.5 rounded-full bg-[var(--color-accent)] shrink-0" />
              <span>{item}</span>
            </li>
          ))}
        </ul>

        <div class="p-4 rounded border border-[var(--color-border)] bg-[var(--color-bg-secondary)]">
          <p class="text-sm italic text-[var(--color-text-muted)] leading-relaxed mb-2">
            "A big update in their design takes them days instead of the many months expected in their industry. And the result is much safer, because the checks are automated and the relationships coded in Python prevent copy-pasting errors."
          </p>
          <a
            href="https://www.linkedin.com/feed/update/urn:li:activity:7240316043074666498/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-xs font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors"
          >
            Lire le post LinkedIn complet &rarr;
          </a>
        </div>

        <p class="text-xs font-mono text-[var(--color-text-muted)] mt-4">Python, Git, AWS, GitHub Actions</p>
      </div>
    </section>

    <!-- Hackathon -->
    <section class="mx-auto max-w-5xl px-6 pb-10">
      <div class="flex items-center gap-4 p-5 rounded-lg border border-[var(--color-border)] bg-[var(--color-bg-secondary)]">
        <span class="text-2xl shrink-0">&#127942;</span>
        <p class="text-sm leading-relaxed text-[var(--color-text)]">
          <span class="font-semibold">3e place</span> au
          <span class="font-semibold">Hackathon Agentique HuggingFace x Anthropic 2025</span>
          — construction d'un agent de réservation de voyage et d'un outil de navigation web pour agents IA.
          <a href="/fr/projects" class="font-mono text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] link-underline transition-colors">Voir tous les projets &rarr;</a>
        </p>
      </div>
    </section>

    <!-- Writing -->
    <section class="mx-auto max-w-5xl px-6 py-12">
      <div class="flex items-baseline justify-between mb-8">
        <h2 class="font-[var(--font-display)] text-2xl text-[var(--color-text)]">Articles</h2>
        <a
          href="/fr/blog"
          class="text-sm text-[var(--color-text-muted)] hover:text-[var(--color-accent)] link-underline transition-colors"
        >
          Tous les articles
        </a>
      </div>
      <div class="space-y-0 divide-y divide-[var(--color-border)]">
        {posts.map((post) => (
          <a
            href={`/fr/blog/${post.id.replace('.md', '')}`}
            class="group flex items-baseline justify-between py-4 gap-4"
          >
            <span class="text-[var(--color-text)] group-hover:text-[var(--color-accent)] transition-colors font-medium">
              {post.data.title_fr || post.data.title}
            </span>
            <span class="text-xs text-[var(--color-text-muted)] whitespace-nowrap font-mono shrink-0">
              {new Date(post.data.date).toLocaleDateString('fr-FR', { month: 'short', year: 'numeric' })}
            </span>
          </a>
        ))}
      </div>
    </section>
  </div>
</BaseLayout>

<script>
  const observer = new MutationObserver(() => {
    const container = document.getElementById('fem-container')
    if (container && container.querySelector('canvas')) {
      document.getElementById('fem-skeleton')?.remove()
      observer.disconnect()
    }
  })
  const container = document.getElementById('fem-container')
  if (container) {
    observer.observe(container, { childList: true, subtree: true })
  }
</script>
